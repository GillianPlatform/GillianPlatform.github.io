<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Exec_map (gillian.Debugger_utils.Exec_map)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">gillian</a> &#x00BB; <a href="../index.html">Debugger_utils</a> &#x00BB; Exec_map</nav><header class="odoc-preamble"><h1>Module <code><span>Debugger_utils.Exec_map</span></code></h1><p>A map of execution of a function (symbolic or otherwise).</p><p>This is represented in a tree structure, where each node represents a command.</p><p>Each command node comes in one of these forms:</p><ul><li>Normal ( <a href="#type-t.Cmd"><code>Cmd</code></a> ) - a normal command with one command node as its child.</li><li>Branching (<a href="#type-t.BranchCmd"><code>BranchCmd</code></a>) - a command with one or more children, with each child identified by a branch case type; this represents a command that has multiple potential outcomes, depending on the program state (e.g. an if/else). Note that this is only interesting in symbolic execution; in concrete execution, they will always have exactly one branch case, thus functioning similarly to normal command nodes.</li><li>Final (<a href="#type-t.FinalCmd"><code>FinalCmd</code></a>) - a command with no children; this represents the end of an execution branch, either due to errors, or normal termination (i.e. when returning from the function).</li></ul><p>These nodes also contain some (configurable) set of information - this usually includes the relevant report ID from the log database, a human-readable representation of the command, and any errors and unifications that occurred during executing the command.</p><p>The child of a <a href="#type-t.Cmd"><code>Cmd</code></a> node may be <a href="#type-t.Nothing"><code>Nothing</code></a>, as can any child of a <a href="#type-t.BranchCmd"><code>BranchCmd</code></a> node; this represents that there is a command here in the code, but it hasn't yet been executed. This is to facilitate the debugger's step-by-step behaviour.</p><p>A command node may also contain a submap; this embeds another exec map inside this command node, either described in full or referred to by name (see <a href="#type-submap"><code>submap</code></a>). This is used to, for example, embed the body of a while-loop in the while-loop command itself.</p></header><div class="odoc-content"><div class="odoc-include"><div class="odoc-spec"><div class="spec type" id="type-cmd_kind" class="anchored"><a href="#type-cmd_kind" class="anchor"></a><code><span><span class="keyword">type</span> <span>('c, 'bd) cmd_kind</span></span><span> = </span></code><table><tr id="type-cmd_kind.Normal" class="anchored"><td class="def variant constructor"><a href="#type-cmd_kind.Normal" class="anchor"></a><code><span>| </span><span><span class="constructor">Normal</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A command that doesn't branch or terminate</p><span class="comment-delim">*)</span></td></tr><tr id="type-cmd_kind.Branch" class="anchored"><td class="def variant constructor"><a href="#type-cmd_kind.Branch" class="anchor"></a><code><span>| </span><span><span class="constructor">Branch</span> <span class="keyword">of</span> <span><span>(<span class="type-var">'c</span> * <span class="type-var">'bd</span>)</span> list</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A branching command</p><span class="comment-delim">*)</span></td></tr><tr id="type-cmd_kind.Final" class="anchored"><td class="def variant constructor"><a href="#type-cmd_kind.Final" class="anchor"></a><code><span>| </span><span><span class="constructor">Final</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A terminating command</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>The &quot;kind&quot; of a command in an exec map</p></div></div><div class="odoc-spec"><div class="spec value" id="val-cmd_kind_to_yojson" class="anchored"><a href="#val-cmd_kind_to_yojson" class="anchor"></a><code><span><span class="keyword">val</span> cmd_kind_to_yojson : 
  'c 'bd. <span><span>( <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'bd</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'c</span>, <span class="type-var">'bd</span> )</span> <a href="#type-cmd_kind">cmd_kind</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Yojson</span>.Safe.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cmd_kind_of_yojson" class="anchored"><a href="#val-cmd_kind_of_yojson" class="anchor"></a><code><span><span class="keyword">val</span> cmd_kind_of_yojson : 
  'c 'bd. <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'bd</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'c</span>, <span class="type-var">'bd</span> )</span> <a href="#type-cmd_kind">cmd_kind</a></span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-kind_of_cases" class="anchored"><a href="#val-kind_of_cases" class="anchor"></a><code><span><span class="keyword">val</span> kind_of_cases : <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span class="type-var">'b</span>, unit )</span> <a href="#type-cmd_kind">cmd_kind</a></span></span></code></div><div class="spec-doc"><p>Maps a list of branches to <code>Normal</code> if empty, or <code>Branch</code></p></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('branch_case, 'cmd_data, 'branch_data) t</span></span><span> = </span></code><table><tr id="type-t.Nothing" class="anchored"><td class="def variant constructor"><a href="#type-t.Nothing" class="anchor"></a><code><span>| </span><span><span class="constructor">Nothing</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>An empty space; represents a command yet to be executed</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.Cmd" class="anchored"><td class="def variant constructor"><a href="#type-t.Cmd" class="anchor"></a><code><span>| </span><span><span class="constructor">Cmd</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-t.data" class="anchored"><td class="def record field"><a href="#type-t.data" class="anchor"></a><code><span>data : <span class="type-var">'cmd_data</span>;</span></code></td></tr><tr id="type-t.next" class="anchored"><td class="def record field"><a href="#type-t.next" class="anchor"></a><code><span><span class="keyword">mutable</span> next : <span><span>( <span class="type-var">'branch_case</span>, <span class="type-var">'cmd_data</span>, <span class="type-var">'branch_data</span> )</span> <a href="#type-t">t</a></span>;</span></code></td></tr></table><code><span>}</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A non-branching command with one next command</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.BranchCmd" class="anchored"><td class="def variant constructor"><a href="#type-t.BranchCmd" class="anchor"></a><code><span>| </span><span><span class="constructor">BranchCmd</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-t.data" class="anchored"><td class="def record field"><a href="#type-t.data" class="anchor"></a><code><span>data : <span class="type-var">'cmd_data</span>;</span></code></td></tr><tr id="type-t.nexts" class="anchored"><td class="def record field"><a href="#type-t.nexts" class="anchor"></a><code><span>nexts : <span><span>( <span class="type-var">'branch_case</span>,
          <span class="type-var">'branch_data</span> * <span><span>( <span class="type-var">'branch_case</span>, <span class="type-var">'cmd_data</span>, <span class="type-var">'branch_data</span> )</span> <a href="#type-t">t</a></span> )</span>
          <a href="../../Utils/Prelude/Hashtbl/index.html#type-t">Utils.Prelude.Hashtbl.t</a></span>;</span></code></td></tr></table><code><span>}</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A branching command, with one or more branch cases</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.FinalCmd" class="anchored"><td class="def variant constructor"><a href="#type-t.FinalCmd" class="anchor"></a><code><span>| </span><span><span class="constructor">FinalCmd</span> <span class="keyword">of</span> </span><span>{</span></code><table><tr id="type-t.data" class="anchored"><td class="def record field"><a href="#type-t.data" class="anchor"></a><code><span>data : <span class="type-var">'cmd_data</span>;</span></code></td></tr></table><code><span>}</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>A command with no subsequent ones, either due to normal termination or an error</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>An exec map / node in an exec map; takes the following type parameters:</p><ul><li><code>'branch_case</code>: the type that identifies a branch case</li><li><code>'cmd_data</code>: the type of the data attached to each non-<code>Nothing</code> node</li><li><code>'branch_data</code>: additional data attached to each branch case</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-to_yojson" class="anchored"><a href="#val-to_yojson" class="anchor"></a><code><span><span class="keyword">val</span> to_yojson : 
  'branch_case 'cmd_data 'branch_data. <span><span>( <span><span class="type-var">'branch_case</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'cmd_data</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'branch_data</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'branch_case</span>, <span class="type-var">'cmd_data</span>, <span class="type-var">'branch_data</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Yojson</span>.Safe.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_yojson" class="anchored"><a href="#val-of_yojson" class="anchor"></a><code><span><span class="keyword">val</span> of_yojson : 
  'branch_case 'cmd_data 'branch_data. <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
                                         <span><span class="type-var">'branch_case</span>
                                           <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'cmd_data</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'branch_data</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'branch_case</span>, <span class="type-var">'cmd_data</span>, <span class="type-var">'branch_data</span> )</span> <a href="#type-t">t</a></span>
    <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-stop_at" class="anchored"><a href="#type-stop_at" class="anchor"></a><code><span><span class="keyword">type</span> stop_at</span><span> = </span></code><table><tr id="type-stop_at.StartOfPath" class="anchored"><td class="def variant constructor"><a href="#type-stop_at.StartOfPath" class="anchor"></a><code><span>| </span><span><span class="constructor">StartOfPath</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stop at the start of the path, i.e. as soon as possible</p><span class="comment-delim">*)</span></td></tr><tr id="type-stop_at.EndOfPath" class="anchored"><td class="def variant constructor"><a href="#type-stop_at.EndOfPath" class="anchor"></a><code><span>| </span><span><span class="constructor">EndOfPath</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Stop at the end of the path, i.e. as late as possible</p><span class="comment-delim">*)</span></td></tr><tr id="type-stop_at.BeforeNothing" class="anchored"><td class="def variant constructor"><a href="#type-stop_at.BeforeNothing" class="anchor"></a><code><span>| </span><span><span class="constructor">BeforeNothing</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>As with <code>EndOfPath</code>, but if the path ends with <code>Nothing</code>, step back to the previous command</p><span class="comment-delim">*)</span></td></tr></table></div><div class="spec-doc"><p>Used for various map-traversal commands; signifies when to stop exploring paths</p></div></div><div class="odoc-spec"><div class="spec type" id="type-unification" class="anchored"><a href="#type-unification" class="anchor"></a><code><span><span class="keyword">type</span> unification</span><span> = </span><span>{</span></code><table><tr id="type-unification.id" class="anchored"><td class="def record field"><a href="#type-unification.id" class="anchor"></a><code><span>id : <a href="../../Gillian/Logging/Report_id/index.html#type-t">Logging.Report_id.t</a>;</span></code></td></tr><tr id="type-unification.kind" class="anchored"><td class="def record field"><a href="#type-unification.kind" class="anchor"></a><code><span>kind : <a href="../../Engine/Unifier/index.html#type-unify_kind">Engine.Unifier.unify_kind</a>;</span></code></td></tr><tr id="type-unification.result" class="anchored"><td class="def record field"><a href="#type-unification.result" class="anchor"></a><code><span>result : <a href="../Unify_map/index.html#type-unify_result">Unify_map.unify_result</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>Data about a unification</p></div></div><div class="odoc-spec"><div class="spec value" id="val-unification_to_yojson" class="anchored"><a href="#val-unification_to_yojson" class="anchor"></a><code><span><span class="keyword">val</span> unification_to_yojson : <span><a href="#type-unification">unification</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-unification_of_yojson" class="anchored"><a href="#val-unification_of_yojson" class="anchor"></a><code><span><span class="keyword">val</span> unification_of_yojson : 
  <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-unification">unification</a> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-submap" class="anchored"><a href="#type-submap" class="anchor"></a><code><span><span class="keyword">type</span> <span>'t submap</span></span><span> = </span></code><table><tr id="type-submap.NoSubmap" class="anchored"><td class="def variant constructor"><a href="#type-submap.NoSubmap" class="anchor"></a><code><span>| </span><span><span class="constructor">NoSubmap</span></span></code></td></tr><tr id="type-submap.Submap" class="anchored"><td class="def variant constructor"><a href="#type-submap.Submap" class="anchor"></a><code><span>| </span><span><span class="constructor">Submap</span> <span class="keyword">of</span> <span class="type-var">'t</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Embed an <code>Exec_map</code> as a submap</p><span class="comment-delim">*)</span></td></tr><tr id="type-submap.Proc" class="anchored"><td class="def variant constructor"><a href="#type-submap.Proc" class="anchor"></a><code><span>| </span><span><span class="constructor">Proc</span> <span class="keyword">of</span> string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Embed the execution of another proc as a submap</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-submap_to_yojson" class="anchored"><a href="#val-submap_to_yojson" class="anchor"></a><code><span><span class="keyword">val</span> submap_to_yojson : 
  't. <span><span>( <span><span class="type-var">'t</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Yojson</span>.Safe.t )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="#type-submap">submap</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Yojson</span>.Safe.t</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-submap_of_yojson" class="anchored"><a href="#val-submap_of_yojson" class="anchor"></a><code><span><span class="keyword">val</span> submap_of_yojson : 
  't. <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'t</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'t</span> <a href="#type-submap">submap</a></span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-_" class="anchored"><a href="#val-_" class="anchor"></a><code><span><span class="keyword">val</span> _ : 
  <span><span>( <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Yojson</span>.Safe.t <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-submap">submap</a></span> <span class="xref-unresolved">Ppx_deriving_yojson_runtime</span>.error_or</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-find_path" class="anchored"><a href="#val-find_path" class="anchor"></a><code><span><span class="keyword">val</span> find_path : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> list</span> option</span></span></code></div><div class="spec-doc"><p>Traverse the map depth-first, giving the path to the first node that matches the given predicate (or <code>None</code> otherwise)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-find_path_exn" class="anchored"><a href="#val-find_path_exn" class="anchor"></a><code><span><span class="keyword">val</span> find_path_exn : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span class="type-var">'b</span>, <span class="type-var">'a</span>, <span class="type-var">'c</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> list</span></span></code></div><div class="spec-doc"><p>Exception-raising equivalent to <code>find_path</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-at_path" class="anchored"><a href="#val-at_path" class="anchor"></a><code><span><span class="keyword">val</span> at_path : 
  <span>?stop_at:<a href="#type-stop_at">stop_at</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'b</span>, <span class="type-var">'c</span>, <span class="type-var">'d</span> )</span> <a href="#type-t">t</a></span> option</span></span></code></div><div class="spec-doc"><p>Gets the node at the given path</p></div></div><div class="odoc-spec"><div class="spec value" id="val-at_path_exn" class="anchored"><a href="#val-at_path_exn" class="anchor"></a><code><span><span class="keyword">val</span> at_path_exn : 
  <span>?stop_at:<a href="#type-stop_at">stop_at</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span> )</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'c</span> )</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Exception-raising equivalent to <code>at_path</code></p></div></div><div class="odoc-spec"><div class="spec module" id="module-Packaged" class="anchored"><a href="#module-Packaged" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Packaged/index.html">Packaged</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An Exec_map to be passed to the debugger frontend and displayed</p></div></div></div></div></body></html>